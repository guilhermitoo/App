create table usuarios
(
	id int not null primary key auto_increment,
	nome varchar(100) not null,
	email varchar(50) not null,
	senha varchar(50) not null
);

create table funcionarios
(
	id int not null primary key auto_increment,
	nome varchar(100) not null,
	rg varchar(12) not null,
	cpf varchar(14) not null unique,
	periodo char(1) not null,
	email varchar(50) not null,
	senha varchar(50) not null	
);

create table locais
(
	id int not null primary key auto_increment,
	nome varchar(50) not null
);

create table equipamentos
(
	id int not null primary key auto_increment,
	descricao varchar(50) not null,
	local_id int not null,
	CONSTRAINT fkLocal FOREIGN KEY (local_id) REFERENCES locais (id) ON UPDATE NO ACTION ON DELETE NO ACTION
);

create table chamados
(
	id int not null primary key auto_increment,
	descricao varchar(200) not null,
	data_inicio date not null,
	data_fim date,
	status int not null,
	usuario_id int not null,
	funcionario_id int not null,
	equipamento_id int not null,
	CONSTRAINT fkUsuario FOREIGN KEY (usuario_id) REFERENCES usuarios(id) ON UPDATE NO ACTION ON DELETE NO ACTION,
	CONSTRAINT fkFuncionario FOREIGN KEY (funcionario_id) REFERENCES funcionarios(id) ON UPDATE NO ACTION ON DELETE NO ACTION,
	CONSTRAINT fkEquipamento FOREIGN KEY (equipamento_id) REFERENCES equipamentos(id) ON UPDATE NO ACTION ON DELETE NO ACTION
);


-- código de criação do usuário

CREATE USER 'user'@'localhost' IDENTIFIED BY PASSWORD '*23AE809DDACAF96AF0FD78ED04B6A265E05AA257'; 
GRANT USAGE ON *.* TO 'user'@'localhost' IDENTIFIED BY PASSWORD '*23AE809DDACAF96AF0FD78ED04B6A265E05AA257'; 
GRANT ALL PRIVILEGES ON `appriori`.* TO 'user'@'localhost';